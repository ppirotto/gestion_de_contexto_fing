<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">


<h:head>
	<title><ui:insert name="title">Default title</ui:insert></title>
<!-- 	<link -->
<!-- 		href="http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" -->
<!-- 		rel="stylesheet" type="text/css" /> -->
<!-- 	<script -->
<!-- 		src="http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js" -->
<!-- 		type="text/javascript"></script> -->
<!-- 	<script -->
<!-- 		src="http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js" -->
<!-- 		type="text/javascript"></script> -->
<!-- 	<link href="http://alexgorbatchev.com/pub/sh/current/styles/shCore.css" -->
<!-- 		rel="stylesheet" type="text/css" /> -->
	<script name="jquery/jquery.js" library="primefaces"></script>

	
<!-- 	<script> -->
//     var myCodeMirror = CodeMirror.fromTextArea(document.getElementById("codeTextArea"));
<!--     </script> -->
<!--     <link rel="stylesheet" href="lib/codemirror.css"/> -->
<!--         <script src="lib/codemirror.js"></script> -->
<!--         <script src="mode/javascript/javascript.js"></script> -->
<!--         <script src="addon/fold/foldcode.js"></script> -->
        <h:outputStylesheet library="primefaces-extensions" name="codemirror/mode/tiki.css" /> 

</h:head>


<h:body>
<p:layout style="min-width:400px;min-height:200px;" fullPage="true">
 	<p:layoutUnit position="north" resizable="false" size="70" minSize="50" maxSize="400">
 		<h:form>
	 		<h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
		        <p:outputLabel for="versionSelectOneMenu" value="Seleccionar version base:" />
		        <p:selectOneMenu id="versionSelectOneMenu" value="#{rulesBean.selectedVersion}" converter="versionConverter" style="width:125px">
		        	<f:ajax listener="#{rulesBean.selectedVersionChanged}" render=":ruleForm:ruleSelectOneListbox"/>
		            <f:selectItems value="#{rulesBean.res.versions}" var="version" itemLabel="#{version.versionNumber}" itemValue="#{version}"/>
		        </p:selectOneMenu>
	         </h:panelGrid>
         </h:form>
    </p:layoutUnit>
    <p:layoutUnit position="west" resizable="false" size="300" minSize="40" maxSize="300">
        <h:form id="ruleForm">
	        <p:selectOneListbox id="ruleSelectOneListbox" value="#{rulesBean.selectedRule}" converter="ruleConverter" style="width:250px">
	        	<f:ajax listener="#{rulesBean.selectedRuleChanged}" render=":codeMirrorForm:codeMirror"/>
	            <f:selectItems value="#{rulesBean.selectedVersion.rules}" var="rule" itemLabel="#{rule.name}" itemValue="#{rule}"/>
	        </p:selectOneListbox>
         </h:form>
    </p:layoutUnit>
 
    <p:layoutUnit position="center"  style="width: 500px;" fullPage="true">
<!-- 			<form id="codeForm" style="width: 500px;"> -->
<!-- 				<textarea id="code" name="code" value="#{rulesBean.selectedRule.rule}">#{rulesBean.selectedRule.rule}</textarea> -->
<!-- 			</form> -->
<!-- <form id="codeForm"> -->
<!-- <p:inputTextarea id="code" name="code" rows="150" cols="80" value="#{rulesBean.selectedRule.rule}"  /> -->
<!-- </form> -->
<h:form id="codeMirrorForm">
<pe:codeMirror id="codeMirror" style="min-width:400px;min-height:1000px;height:999px;" mode="javascript" theme="eclipse" value="#{rulesBean.selectedRule.rule}" lineNumbers="true" matchBrackets="true" /> 
</h:form>
		</p:layoutUnit>
</p:layout>

	
	
</h:body>
</html>